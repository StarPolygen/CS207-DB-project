# 懒猫二手交易市场

___

#### 基本信息

组别：周二306组

组员与分工：前端：吴培霖、朱星宇 

​			后端：李浩南

​			数据库设计：卫焱滨、丁建峰

___



## 综述

​	●	 “懒猫二手交易市场”，试图解决 (本校同学们日益增长的日常交易需要)， 和 (校内已有的交易平台即跳蚤群信息获取难、信息不准，信息杂乱的现状) 之间的矛盾。

​	● 	项目开发历时12周，从第2,3周的初步构想和分析需求，到4-6周结合需求设计和建立数据库，7-13周前后端设计与实现、优化数据库设计、导入数据、初步完成项目。项目成员在学习数据库相关知识的同时不断完善我们的作品。

​	● 	数据库类型为关系型数据库，设计标准参照3NF

​	●	前端实现基于微信小程序，并在实现原有功能的基础上设计了聊天界面，`具体请查看文档“前端实现.md”`

​	● 	后端实现以Spring boot为框架，Intellij IDEA为开发工具，java为宿主语言，`具体请查看文档“后端实现.md"`

​	● 	以下网络资源为我们提供了帮助：

> ​	京东网：https://www.jd.com/
>
> ​	API-微信小程序-微信公众平台：
>
> ​	https://www.baidu.com/link?url=EQgotrbuPscSQSJOdOE7xNoSJWfCCd54TM2GSCKIe7zWVSKN4C5NMAIUOO9VzJDcyNYPeZXrrbvCVx3eMTaWBa&wd=&eqid=83ee9ad00000356a000000065ce2b580
>
> ​	

## 用户需求分析

​	项目的应用场景为跳蚤市场，面向的用户群体为学校师生，旨在给大家提供一个方便简捷安全的交易途径

​	

| 由于学校现有跳蚤群本身存在缺陷 | 我们针对以上缺陷做出如下改进      |
| ------------------------------ | --------------------------------- |
| （1）缺少历史卖出记录          | 1）保存购买卖出记录、结构化存储   |
| （2）人员杂乱                  | 2）账号注册时填写个人信息         |
| （3）浏览不便                  | 3）更完善的搜索功能               |
| （4）信息杂乱                  | 4）提供商品筛选功能               |
| （5）缺乏可靠性和安全性        | 5）保护隐私，并建立举报和反馈机制 |
| （6）界面不够美观流畅          | 6）设计美观大方的UI界面           |

​	

​	结合以上改进，和跳蚤市场的本身功能需要，以及用户群体为学校师生的特性，我们获得如下用户需求：





| 所属模块     | 用户需求分析                                     | 备注                   |
| ------------ | :----------------------------------------------- | ---------------------- |
| 账号部分：   | 拥有私人账号<br />并对交易者展示交易所需个人信息 |                        |
| 交易部分：   | 查看自己和他人的历史订单记录                     |                        |
|              | 评论交易                                         |                        |
|              | 举报交易                                         |                        |
|              | 交易双方即时聊天                                 | 单独设计了配套聊天设施 |
|              | 查看交易信息<br />(收发件、物品信息、交易状态等  |                        |
| 商品部分：   | 商品发布、下架、更新商品信息                     |                        |
|              | 收藏商品                                         |                        |
|              | 举报不合法商品                                   |                        |
|              | 简便快捷地筛选商品                               |                        |
| 个性化部分： | 更加美观流畅的UI                                 |                        |
|              | 设置头像和昵称                                   |                        |
| 安全性考虑： | 权限分级                                         |                        |
|              | 隐私保护                                         |                        |
|              |                                                  |                        |



## 数据需求分析

根据以上用户需求，经过筛选与分析，我们获得以下数据需求：

**管理员部分**

| 数据                                              |                 类型                 |                 含义                  |                          来源或作用                          |
| ------------------------------------------------- | :----------------------------------: | :-----------------------------------: | :----------------------------------------------------------: |
| admin                                             |             Varchar(50)              |                DBA账号                | DBA可以任命客服及改变用户权限<br/>DBA拥有操作一切数据的权限<br/>客服是次级管理员，用于处理举报 |
| password<br/><br/><br/><br/><br/>**用户信息部分** | Varchar(50)<br/><br/><br/><br/><br/> |   DBA密码<br/><br/><br/><br/><br/>    |                                                              |
| user_id                                           |               int(11)                |               用户编号                |                                                              |
| code                                              |              Varchar(6)              |            用户登录验证码             |                                                              |
| email_address                                     |             Varchar(100)             |             用户邮箱地址              |                                                              |
| status                                            |                int(3)                |               用户状态                |                 安全性考虑    用户是否被封禁                 |
| permission                                        |                int(2)                |               用户权限                |            安全性考虑    用户是否为客服人员<br/>             |
| avatar_url                                        |             Varchar(500)             |           用户头像图片地址            |                          个性化考虑                          |
| nickname                                          |             Varchar(45)              |               用户昵称                |                          个性化考虑                          |
| open_id                                           |             Varchar(50)              |             微信登录相关              |                                                              |
| time<br/><br/><br/><br/><br/>**商品部分**         |  timestamp<br/><br/><br/><br/><br/>  | 微信登录相关<br/><br/><br/><br/><br/> |                                                              |
| good_id                                           |               int(11)                |               商品编号                |                                                              |
| good_tag                                          |               int(11)                |             商品分类标签              |                      用于按标签检索商品                      |
| seller_id                                         |               int(11)                |            卖家的用户编号             |                                                              |
| name                                              |             Varchar(45)              |               商品名称                |                用户可以按商品名称进行模糊检索                |
| descriptiom                                       |             Varchar(500)             |               商品描述                |                                                              |
| good_status                                       |             smallint(3)              |               商品状态                |                安全性考虑<br/>商品是否被封禁                 |
| release_time                                      |              timestamp               |               上架日期                |                                                              |
| price                                             |             decimal(8,2)             |               商品价格                |                                                              |
| last_price                                        |             deciaml(8,2)             |            之前的商品价格             |                                                              |
| picture_url                                       |             varchar(500)             |           商品描述图片地址            |                                                              |
| <br/><br/><br/><br/><br/>**交易（订单）部分**     |                                      |                                       |                                                              |
| order_id                                          |               int(11)                |               交易编号                |                                                              |
| buyer_id                                          |               int(11)                |            买家的用户编号             |                                                              |
| good_id                                           |               int(11)                |               商品编号                |                                                              |
| time                                              |              timestamp               |               交易时间                |                                                              |
| status                                            |             smallint(3)              |               交易状态                |                  当前交易是否被举报或被取消                  |
| <br/><br/><br/><br/><br/>**收藏部分**             |                                      |                                       |                                                              |
| favorite_id                                       |               int(11)                |               收藏编号                |                                                              |
| add_user                                          |               int(11)                |          收藏该商品的用户ID           |                                                              |
| good_id                                           |               int(11)                |             该商品的编号              |                                                              |
| add_time                                          |              timestamp               |           该条收藏添加时间            |                                                              |
| <br/><br/><br/><br/><br/>**交易评价和评论部分**   |                                      |                                       |                                                              |
| comment_id                                        |               int(11)                |               评论编号                |                                                              |
| order_id                                          |               int(11)                |          该评论产自哪条交易           |                                                              |
| time                                              |              timestamp               |               评论时间                |                                                              |
| description                                       |             Varchar(512)             |             评论文本描述              |                                                              |
| com_picture_url                                   |             Varchar(45)              |        评论中附带的图片的地址         |                                                              |
| rate                                              |               int(11)                |           对本次交易的评分            |             买家可以通过对交易评分来影响商品评价             |
| <br/><br/><br/><br/><br/>**安全性考虑：举报部分** |    ****<br/><br/><br/><br/><br/>     |                                       |                                                              |
| report_id                                         |               int(11)                |               举报编号                |                                                              |
| good_id                                           |               int(11)                |            被举报商品编号             |                                                              |
| reporter_id                                       |               int(11)                |            举报者用户编号             |                                                              |
| picture_url                                       |             Varchar(50)              |         举报中的图片描述地址          |                                                              |
| description                                       |             Varchar(512)             |           举报中的文字描述            |                                                              |
| feedback                                          |             Varchar(512)             |               举报反馈                |       客服对举报的处理措施和时间<br/>会反馈给举报双方        |
| <br/><br/><br/><br/><br/>**功能性考虑：聊天部分** |                                      |                                       |                                                              |
| chat_id                                           |               int(11)                |               聊天编号                |                                                              |
| buyer_id                                          |               int(11)                |                买家ID                 |                           聊天双方                           |
| seller_id                                         |               int(11)                |                卖家ID                 |                                                              |
| good_id                                           |               int(11)                |               商品编号                |                 买家卖家针对哪件商品进行磋商                 |
| unread_num                                        |               int(11)                |             未读信息数量              |                   提示用户有多少条未读信息                   |
| messege_content                                   |             Varchar(512)             |               信息内容                |                                                              |
| messege_type                                      |               int(11)                |               信息类型                |                       图片/文字/emoji                        |
| messege_time                                      |              timestamp               |           该条信息发送时间            |                                                              |
| messege_side                                      |             smallint(6)              |              信息发送者               |                标记该条信息由买家还是卖家发送                |





## 设计表模型

根据以上数据需求分析，按照3NF的标准，设计关系模型概览如下：

模型中的数据与数据需求中的描述一一对应

!![1558430730526](C:\Users\lenovo\AppData\Local\Temp\1558430730526.png)cs307project](https://github.com/Tert-butyllithium/cs307Project/raw/master/asset/cs307project.png) 